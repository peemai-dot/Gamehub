<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vocab Boom üí£</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Press Start 2P', monospace;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  text-align:center;
}
.screen{display:none;padding:20px;}
.screen.active{display:block;}
h1{color:#fff;text-shadow:3px 3px #000;}
.box{
  background:#fff;
  border:4px solid #000;
  padding:20px;
  max-width:500px;
  margin:20px auto;
  box-shadow:6px 6px #000;
}
button,input,select{
  font-family:'Press Start 2P';
  padding:10px;
  margin:6px;
  border:3px solid #000;
}
button{background:#00eaff;cursor:pointer;}
button:hover{background:#00c0cc;}
canvas{
  width:100%;
  max-width:440px;
  height:220px;
  display:block;
  margin:10px auto;
  background:#fff;
  border:4px solid #000;
}
#feedback{
  font-size:26px;
  height:60px;
  margin-top:10px;
}
.correct{color:#2ecc71;}
.wrong{color:#e74c3c;}
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
</style>
</head>

<body>

<!-- ===== START SCREEN ===== -->
<div id="startScreen" class="screen active">
  <h1>üéÆ VOCAB BOOM üí£</h1>
  <div class="box">
    <p>ENTER YOUR NAME</p>
    <input id="playerName" placeholder="PLAYER">
    <p>SELECT LEVEL</p>
    <select id="level">
      <option value="easy">EASY</option>
      <option value="medium">MEDIUM</option>
      <option value="hard">HARD</option>
    </select><br>
    <button onclick="startGame()">START ‚ñ∂</button>
  </div>
</div>

<!-- ===== GAME SCREEN ===== -->
<div id="gameScreen" class="screen">
  <div class="topbar">
    <button onclick="goHome()">‚¨Ö HOME</button>
    <div id="playerInfo"></div>
  </div>

  <div class="box">
    <p id="meaning"></p>
    <div id="icon" style="font-size:47px"></div>
    <canvas id="game"></canvas>
    <div id="feedback"></div>
    <p>
      ‚≠ê <span id="score">0</span>
      ‚ù§Ô∏è <span id="lives">3</span>
      ‚è± <span id="time">60</span>
    </p>
  </div>
</div>

<!-- ===== RESULT SCREEN ===== -->
<div id="resultScreen" class="screen">
  <h1 id="resultTitle"></h1>
  <div class="box">
    <p id="finalScore"></p>
    <button onclick="goHome()">‚¨Ö BACK TO HOME</button>
  </div>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d"); 

function resizeCanvas(){
  const rect = canvas.getBoundingClientRect();
  canvas.width = rect.width;
  canvas.height = rect.height;

  // ‚≠ê ‡∏ß‡∏≤‡∏î‡∏ä‡πâ‡∏≠‡∏¢‡∏™‡πå‡∏Å‡∏•‡∏±‡∏ö ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà
  if(choices.length > 0){
    drawChoices();
  }
}

window.addEventListener("resize", resizeCanvas);

let player="", score=0, lives=3, time=60;
let words=[], current, choices=[];
let timer=null;

/* ===== VOCAB ===== */
const vocab={
easy: [
{en:"arrive",th:"‡∏°‡∏≤‡∏ñ‡∏∂‡∏á",icon:"üö∂"},
{en:"borrow",th:"‡∏¢‡∏∑‡∏°",icon:"ü§ù"},
{en:"decide",th:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à",icon:"üß†"},
{en:"explain",th:"‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢",icon:"üó£Ô∏è"},
{en:"follow",th:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°",icon:"üë£"},
{en:"improve",th:"‡∏û‡∏±‡∏í‡∏ô‡∏≤",icon:"üìà"},
{en:"invite",th:"‡πÄ‡∏ä‡∏¥‡∏ç",icon:"‚úâÔ∏è"},
{en:"protect",th:"‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á",icon:"üõ°Ô∏è"},
{en:"return",th:"‡∏Å‡∏•‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô",icon:"‚Ü©Ô∏è"},
{en:"suggest",th:"‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥",icon:"üí°"},
{en:"prepare",th:"‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß",icon:"üß≥"},
{en:"receive",th:"‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö",icon:"üì•"},
{en:"repair",th:"‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°",icon:"üîß"},
{en:"replace",th:"‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà",icon:"üîÅ"},
{en:"search",th:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",icon:"üîç"},
{en:"share",th:"‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô",icon:"ü§≤"},
{en:"support",th:"‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô",icon:"üí™"},
{en:"travel",th:"‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á",icon:"‚úàÔ∏è"},
{en:"understand",th:"‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à",icon:"‚úÖ"},
{en:"visit",th:"‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°",icon:"üè†"},
{en:"accept",th:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",icon:"‚úîÔ∏è"},
{en:"believe",th:"‡πÄ‡∏ä‡∏∑‡πà‡∏≠",icon:"üôè"},
{en:"change",th:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á",icon:"üîÑ"},
{en:"choose",th:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",icon:"üéØ"},
{en:"continue",th:"‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏ï‡πà‡∏≠",icon:"‚û°Ô∏è"},
{en:"discover",th:"‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö",icon:"üó∫Ô∏è"},
{en:"encourage",th:"‡πÉ‡∏´‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à",icon:"üåü"},
{en:"forget",th:"‡∏•‡∏∑‡∏°",icon:"‚ùì"},
{en:"forgive",th:"‡πÉ‡∏´‡πâ‡∏≠‡∏†‡∏±‡∏¢",icon:"üíñ"},
{en:"happen",th:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô",icon:"‚ö°"},
{en:"increase",th:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô",icon:"üìä"},
{en:"include",th:"‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á",icon:"‚ûï"},
{en:"join",th:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°",icon:"üë•"},
{en:"manage",th:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£",icon:"üìã"},
{en:"notice",th:"‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï",icon:"üëÄ"},
{en:"offer",th:"‡πÄ‡∏™‡∏ô‡∏≠",icon:"üéÅ"},
{en:"promise",th:"‡∏™‡∏±‡∏ç‡∏ç‡∏≤",icon:"ü§û"},
{en:"realize",th:"‡∏ï‡∏£‡∏∞‡∏´‡∏ô‡∏±‡∏Å",icon:"üí≠"},
{en:"remind",th:"‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",icon:"‚è∞"},
{en:"solve",th:"‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤",icon:"üß©"}
],
  medium: [
{en:"achievement",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",icon:"üèÜ"},
{en:"analysis",th:"‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå",icon:"üìä"},
{en:"attitude",th:"‡∏ó‡∏±‡∏®‡∏ô‡∏Ñ‡∏ï‡∏¥",icon:"üß†"},
{en:"confidence",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à",icon:"üí™"},
{en:"consequence",th:"‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏≤‡∏°‡∏°‡∏≤",icon:"‚û°Ô∏è"},
{en:"consider",th:"‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤",icon:"ü§î"},
{en:"contribute",th:"‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏£‡πà‡∏ß‡∏°",icon:"ü§ù"},
{en:"convenient",th:"‡∏™‡∏∞‡∏î‡∏ß‡∏Å",icon:"üïí"},
{en:"creative",th:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå",icon:"üé®"},
{en:"describe",th:"‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢",icon:"‚úçÔ∏è"},
{en:"determine",th:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î",icon:"üìå"},
{en:"efficient",th:"‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û",icon:"‚öôÔ∏è"},
{en:"emphasize",th:"‡πÄ‡∏ô‡πâ‡∏ô‡∏¢‡πâ‡∏≥",icon:"‚ùó"},
{en:"environment",th:"‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°",icon:"üåç"},
{en:"essential",th:"‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô",icon:"‚≠ê"},
{en:"estimate",th:"‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô",icon:"üìè"},
{en:"evidence",th:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô",icon:"üîé"},
{en:"flexible",th:"‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô",icon:"üßò"},
{en:"frequent",th:"‡∏ö‡πà‡∏≠‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á",icon:"üîÅ"},
{en:"function",th:"‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà",icon:"üõ†Ô∏è"},
{en:"impact",th:"‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö",icon:"üí•"},
{en:"independent",th:"‡∏≠‡∏¥‡∏™‡∏£‡∏∞",icon:"üïäÔ∏è"},
{en:"influence",th:"‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•",icon:"üåä"},
{en:"maintain",th:"‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÑ‡∏ß‡πâ",icon:"üîí"},
{en:"motivate",th:"‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô",icon:"üî•"},
{en:"objective",th:"‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢",icon:"üéØ"},
{en:"opportunity",th:"‡πÇ‡∏≠‡∏Å‡∏≤‡∏™",icon:"üö™"},
{en:"participate",th:"‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏£‡πà‡∏ß‡∏°",icon:"üôã"},
{en:"potential",th:"‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û",icon:"‚ö°"},
{en:"priority",th:"‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç",icon:"ü•á"},
{en:"recognize",th:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö/‡∏à‡∏≥‡πÑ‡∏î‡πâ",icon:"üëÅÔ∏è"},
{en:"require",th:"‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£",icon:"üìé"},
{en:"resource",th:"‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£",icon:"üì¶"},
{en:"responsible",th:"‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",icon:"üßæ"},
{en:"significant",th:"‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç",icon:"‚ÄºÔ∏è"},
{en:"strategy",th:"‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå",icon:"‚ôüÔ∏è"},
{en:"sufficient",th:"‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠",icon:"‚úîÔ∏è"},
{en:"theory",th:"‡∏ó‡∏§‡∏©‡∏é‡∏µ",icon:"üìò"},
{en:"trend",th:"‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°",icon:"üìà"},
{en:"variety",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢",icon:"üåà"}
],
  hard: [
{en:"assumption",th:"‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô",icon:"‚ùì"},
{en:"awareness",th:"‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏∞‡∏´‡∏ô‡∏±‡∏Å‡∏£‡∏π‡πâ",icon:"üëÅÔ∏è"},
{en:"complexity",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô",icon:"üåÄ"},
{en:"controversial",th:"‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏Å‡πÄ‡∏ñ‡∏µ‡∏¢‡∏á",icon:"‚öîÔ∏è"},
{en:"credibility",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠",icon:"‚úîÔ∏è"},
{en:"critical",th:"‡πÄ‡∏ä‡∏¥‡∏á‡∏ß‡∏¥‡∏û‡∏≤‡∏Å‡∏©‡πå",icon:"üîç"},
{en:"dedicate",th:"‡∏≠‡∏∏‡∏ó‡∏¥‡∏®",icon:"‚ù§Ô∏è"},
{en:"dimension",th:"‡∏°‡∏¥‡∏ï‡∏¥",icon:"üìê"},
{en:"distinction",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á",icon:"‚öñÔ∏è"},
{en:"diversity",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢",icon:"üåç"},
{en:"eliminate",th:"‡∏Å‡∏≥‡∏à‡∏±‡∏î",icon:"‚ùå"},
{en:"ethical",th:"‡∏à‡∏£‡∏¥‡∏¢‡∏ò‡∏£‡∏£‡∏°",icon:"‚öñÔ∏è"},
{en:"evaluate",th:"‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤",icon:"üìä"},
{en:"fundamental",th:"‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç",icon:"üß±"},
{en:"hypothesis",th:"‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô",icon:"üß™"},
{en:"inevitable",th:"‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ",icon:"‚è≥"},
{en:"interpret",th:"‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°",icon:"üß†"},
{en:"justify",th:"‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•",icon:"üìñ"},
{en:"long-term",th:"‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß",icon:"üï∞Ô∏è"},
{en:"mechanism",th:"‡∏Å‡∏•‡πÑ‡∏Å",icon:"‚öôÔ∏è"},
{en:"nevertheless",th:"‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏Å‡πá‡∏ï‡∏≤‡∏°",icon:"‚ÜîÔ∏è"},
{en:"perspective",th:"‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á",icon:"üëì"},
{en:"phenomenon",th:"‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏Å‡∏≤‡∏£‡∏ì‡πå",icon:"üåå"},
{en:"principle",th:"‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£",icon:"üìú"},
{en:"prioritize",th:"‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç",icon:"ü•á"},
{en:"proportion",th:"‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô",icon:"üìè"},
{en:"psychological",th:"‡∏ó‡∏≤‡∏á‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤",icon:"üß†"},
{en:"relevant",th:"‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á",icon:"üîó"},
{en:"significance",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç",icon:"‚≠ê"},
{en:"sustainable",th:"‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô",icon:"‚ôªÔ∏è"},
{en:"theoretical",th:"‡πÄ‡∏ä‡∏¥‡∏á‡∏ó‡∏§‡∏©‡∏é‡∏µ",icon:"üìò"},
{en:"transform",th:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á",icon:"üîÑ"},
{en:"uncertainty",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô",icon:"‚ùì"},
{en:"underlying",th:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á",icon:"ü™ú"},
{en:"validity",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",icon:"‚úîÔ∏è"},
{en:"variable",th:"‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£",icon:"üìä"},
{en:"violate",th:"‡∏•‡∏∞‡πÄ‡∏°‡∏¥‡∏î",icon:"üö´"},
{en:"well-being",th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏î‡∏µ",icon:"üíô"},
{en:"widespread",th:"‡πÅ‡∏û‡∏£‡πà‡∏´‡∏•‡∏≤‡∏¢",icon:"üåê"},
{en:"withstand",th:"‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô",icon:"üõ°Ô∏è"}
]
};

/* ===== START GAME ===== */
function startGame(){
  player=document.getElementById("playerName").value||"PLAYER";
  const level=document.getElementById("level").value;

  words=[...vocab[level]];
  score=0; lives=3; time=60;

  document.getElementById("score").innerText=score;
  document.getElementById("lives").innerText=lives;
  document.getElementById("time").innerText=time;
  document.getElementById("playerInfo").innerText="üß† "+player;

  switchScreen("gameScreen");
resizeCanvas();     // ‚≠ê ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å
startTimer();
nextQuestion();
}

/* ===== TIMER ===== */
function startTimer(){
  clearInterval(timer);
  timer=setInterval(()=>{
    time--;
    document.getElementById("time").innerText=time;
    if(time<=0){
      endGame("‚è∞ TIME UP ‚è∞");
    }
  },1000);
}

/* ===== NEXT QUESTION ===== */
function nextQuestion(){

  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(words.length===0){
    endGame("üéâ YOU WIN üëë");
    return;
  }

  current=words.splice(Math.floor(Math.random()*words.length),1)[0];
  document.getElementById("meaning").innerText="‡∏Ñ‡∏≥‡πÑ‡∏´‡∏ô‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤: "+current.th;
  document.getElementById("icon").innerText=current.icon;

  choices=[current];
  const all=[...vocab.easy,...vocab.medium,...vocab.hard];

  while(choices.length<3){
    let r=all[Math.floor(Math.random()*all.length)];
    if(!choices.includes(r)) choices.push(r);
  }

  choices.sort(()=>Math.random()-0.5);

  // ===== FIX TEXT OVERFLOW =====
  ctx.font="10px 'Press Start 2P'";
  const padding=12, gap=10;
const y = canvas.height / 2 - 20;

  choices.forEach(w=>{
    const tw=ctx.measureText(w.en).width;
    w.w=tw+padding*2;
    w.h=40;
  });

  const totalWidth =
    choices.reduce((s,w)=>s+w.w,0)+gap*(choices.length-1);
  let startX=(canvas.width-totalWidth)/2;

  choices.forEach(w=>{
    w.x=startX;
    w.y=y;
    startX+=w.w+gap;
  });

drawChoices();

}

/* ===== CLICK ===== */
canvas.addEventListener("click",e=>{
  const r=canvas.getBoundingClientRect();
  const x=e.clientX-r.left, y=e.clientY-r.top;

  choices.forEach(w=>{
    if(x>w.x && x<w.x+w.w && y>w.y && y<w.y+w.h){
      if(w===current){
        score+=10;
        showFeedback(true);
      }else{
        lives--;
        document.getElementById("lives").innerText=lives;
        showFeedback(false);
        if(lives<=0){
          endGame("üíî GAME OVER üí£");
          return;
        }
      }
      document.getElementById("score").innerText=score;
      setTimeout(nextQuestion,900);
    }
  });
});

/* ===== FEEDBACK ===== */
function showFeedback(correct){
  document.getElementById("feedback").innerHTML =
    correct
    ? "<div class='correct'>‚úÖ CORRECT! üéä</div>"
    : "<div class='wrong'>‚ùå WRONG! üí•</div>";
}

/* ===== DRAW ===== */

function drawChoices(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.font="10px 'Press Start 2P'";

  choices.forEach(w=>{
    ctx.fillStyle="#00eaff";
    ctx.fillRect(w.x,w.y,w.w,w.h);
    ctx.strokeRect(w.x,w.y,w.w,w.h);

    ctx.fillStyle="#000";
    ctx.fillText(w.en, w.x + 6, w.y + 25);
  });
}

/* ===== END GAME ===== */
function endGame(title){
  clearInterval(timer);
  document.getElementById("resultTitle").innerText=title;
  document.getElementById("finalScore").innerText=
    `PLAYER: ${player}\nSCORE: ${score}`;
  switchScreen("resultScreen");
}

/* ===== NAV ===== */
function switchScreen(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
function goHome(){
  clearInterval(timer);
  switchScreen("startScreen");
}
</script>